<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Forecast &quot;future&quot; with TDengine | Do Not Repeat!</title><meta name="author" content="Shuduo Sang"><meta name="copyright" content="Shuduo Sang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Forecast “future” with TDengineIntroTDengine™ is an open-source, cloud-native time series database (TSDB) optimized for the Internet of Things (IoT), Connected Cars, and Industrial IoT. It enables eff">
<meta property="og:type" content="article">
<meta property="og:title" content="Forecast &quot;future&quot; with TDengine">
<meta property="og:url" content="http://blog.norepeat.space/2023/06/14/Forecast-future-with-TDengine/index.html">
<meta property="og:site_name" content="Do Not Repeat!">
<meta property="og:description" content="Forecast “future” with TDengineIntroTDengine™ is an open-source, cloud-native time series database (TSDB) optimized for the Internet of Things (IoT), Connected Cars, and Industrial IoT. It enables eff">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://pbs.twimg.com/profile_images/487469899858464769/kMg2l33E_400x400.jpeg">
<meta property="article:published_time" content="2023-06-14T03:03:04.000Z">
<meta property="article:modified_time" content="2023-06-14T03:39:17.391Z">
<meta property="article:author" content="Shuduo Sang">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pbs.twimg.com/profile_images/487469899858464769/kMg2l33E_400x400.jpeg">
<meta name="twitter:creator" content="@sangshuduo"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://blog.norepeat.space/2023/06/14/Forecast-future-with-TDengine/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Forecast "future" with TDengine',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-14 11:39:17'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://pbs.twimg.com/profile_images/487469899858464769/kMg2l33E_400x400.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img fixed" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Do Not Repeat!"><span class="site-name">Do Not Repeat!</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Forecast &quot;future&quot; with TDengine</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-06-14T03:03:04.000Z" title="Created 2023-06-14 11:03:04">2023-06-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-06-14T03:39:17.391Z" title="Updated 2023-06-14 11:39:17">2023-06-14</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Forecast &quot;future&quot; with TDengine"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="Forecast-“future”-with-TDengine"><a href="#Forecast-“future”-with-TDengine" class="headerlink" title="Forecast “future” with TDengine"></a>Forecast “future” with TDengine</h1><h2 id="Intro"><a href="#Intro" class="headerlink" title="Intro"></a>Intro</h2><p>TDengine™ is an open-source, cloud-native time series database (TSDB) optimized for the Internet of Things (IoT), Connected Cars, and Industrial IoT. It enables efficient, real-time ingestion, processing, and monitoring of petabytes of data per day, generated by billions of sensors and data collectors. </p>
<p>There are many users storing massive data generated by IoT devices, cars, or IT infrastructures into TDengine in real-time. They use standard SQL commands to query the data from TDengine. TDengine supports filter, group, windowed, join, and many aggregation functions to query data. It facilitates users to query data according to their purpose.</p>
<p>Many users also want to get more interested in existing data. For example, what would happen in light of the current trend? With the AI era coming, there are many new technologies or methods emerging in recent years, such as new machine learning, and deep learning algorithms. Is it possible to use machine learning and deep learning algorithms to forecast the future with the data stored in the TDengine cluster?</p>
<p>Fortunately, TDengine supports multiple popular programming language connectors like Java, Python, Go, Rust, C#, NodeJS, etc. Users can use their favorite language connector to access TDengine. The connectors provide interfaces that conform to the specification. That makes connectors easily integrated with other software or frameworks.</p>
<p>This article introduces how to forecast future data with existing data stored in the TDengine. We will mock some test data to reflect a real power system. And demonstrate how to use TDengine and a few Python libraries to forecast how the data will be in the next year.</p>
<p>Suppose the user is an electrical power system company. The user collects the power consumption number from the electricity station meter each day and stores it in a TDengine cluster. Now the user wants to forecast the power consumption will be and to purchase more devices to support it.</p>
<p>As the economy grows, electricity consumption increases by a certain percentage each year. In addition, considering the seasonal variations, electricity consumption varies accordingly. This city is located in the northern hemisphere, so many households use more electricity in the summer. We simulate data to reflect these assumptions</p>
<p>The source code is hosted at <a target="_blank" rel="noopener" href="https://github.com/sangshuduo/td-forecasting">https://github.com/sangshuduo/td-forecasting</a>.</p>
<h2 id="Demonstration"><a href="#Demonstration" class="headerlink" title="Demonstration"></a>Demonstration</h2><h3 id="Step-1-Deploy-TDengine-and-run-the-TDengine-server-on-your-system"><a href="#Step-1-Deploy-TDengine-and-run-the-TDengine-server-on-your-system" class="headerlink" title="Step 1: Deploy TDengine and run the TDengine server on your system"></a>Step 1: Deploy TDengine and run the TDengine server on your system</h3><p>Please refer to the official document <a target="_blank" rel="noopener" href="https://docs.tdengine.com/get-started/">https://docs.tdengine.com/get-started/</a> for detailed instructions.</p>
<h3 id="Step-2-Clone-source-code"><a href="#Step-2-Clone-source-code" class="headerlink" title="Step 2: Clone source code"></a>Step 2: Clone source code</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/sangshuduo/td-forecasting</span><br></pre></td></tr></table></figure>

<h3 id="Step-3-Install-the-required-Python-packages"><a href="#Step-3-Install-the-required-Python-packages" class="headerlink" title="Step 3: Install the required Python packages"></a>Step 3: Install the required Python packages</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># if you are using Ubuntu 20.04 Linux</span><br><span class="line">sudo apt install python3-pyqt5</span><br><span class="line"></span><br><span class="line"># Optional, if PyQT5 fails</span><br><span class="line">sudo apt-get install libxcb-xinerama0</span><br><span class="line"></span><br><span class="line">python3 -m pip install -r requirements.txt</span><br></pre></td></tr></table></figure>

<p>Please note minimal required Python version is 3.8.</p>
<h3 id="Step-4-Mock-some-data"><a href="#Step-4-Mock-some-data" class="headerlink" title="Step 4: Mock some data"></a>Step 4: Mock some data</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 mockdata.py</span><br></pre></td></tr></table></figure>

<h3 id="Step-5-Forecast-next-year’s-data"><a href="#Step-5-Forecast-next-year’s-data" class="headerlink" title="Step 5: Forecast next year’s data"></a>Step 5: Forecast next year’s data</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 forecast.py</span><br></pre></td></tr></table></figure>

<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><p>If everything is okay, the figure will show up like below.</p>
<p><img src="output.png" alt="Image"></p>
<h2 id="How-does-it-work"><a href="#How-does-it-work" class="headerlink" title="How does it work?"></a>How does it work?</h2><h3 id="mockdata-py"><a href="#mockdata-py" class="headerlink" title="mockdata.py"></a>mockdata.py</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">def insert_rec_per_month(conn, db_name, table_name, year, month):</span><br><span class="line">    increment = (year - 2014) * 1.1</span><br><span class="line">    base = int(10 * increment)</span><br><span class="line">    if month &lt; 10 and month &gt; 5:</span><br><span class="line">        factor = 10</span><br><span class="line">    else:</span><br><span class="line">        factor = 8</span><br><span class="line">    for day in range(1, monthrange(year, month)[1] + 1):</span><br><span class="line">        num = base * randint(5, factor) + randint(0, factor)</span><br><span class="line">        sql = f&quot;INSERT INTO &#123;db_name&#125;.&#123;table_name&#125; VALUES (&#x27;&#123;year&#125;-&#123;month&#125;-&#123;day&#125; 00:00:00.000&#x27;, &#123;num&#125;)&quot;</span><br><span class="line">        try:</span><br><span class="line">            conn.execute(sql)</span><br><span class="line">        except Exception as e:</span><br><span class="line">            print(f&quot;command: &#123;sql&#125;&quot;)</span><br><span class="line">            print(e)</span><br></pre></td></tr></table></figure>

<p>The core function of mockdata.py is mocking random data with a few adjustments to fulfill the assumption. </p>
<h3 id="forecast-py"><a href="#forecast-py" class="headerlink" title="forecast.py"></a>forecast.py</h3><p>The forecast.py implements the forecasting function.</p>
<h4 id="Step1-Import-necessary-modules-for-prediction"><a href="#Step1-Import-necessary-modules-for-prediction" class="headerlink" title="Step1: Import necessary modules for prediction"></a>Step1: Import necessary modules for prediction</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import argparse</span><br><span class="line"></span><br><span class="line">import lightgbm as lgb</span><br><span class="line">import matplotlib.pyplot as plt</span><br><span class="line">import mlforecast</span><br><span class="line">import pandas as pd</span><br><span class="line">from mlforecast.target_transforms import Differences</span><br><span class="line">from sklearn.linear_model import LinearRegression</span><br><span class="line">from sqlalchemy import create_engine, text</span><br></pre></td></tr></table></figure>

<p>Here explain what they are and what they are for.</p>
<ul>
<li>Lightgbm is a Python module that supports the LightGBM algorithm, a gradient-boosting framework that uses tree-based learning algorithms.</li>
<li>Matplotlib is one of the most popular Python modules for visualization.</li>
<li>Mlforecast is a framework to perform time series forecasting using machine learning models.</li>
<li>Pandas is the most popular module to support data manipulation. </li>
<li>Sklearn is a module that supports popular data science/machine learning algorithms.</li>
<li>SQLAlchemy is the Python SQL toolkit and Object Relational Mapper that gives application developers the full power and flexibility of SQL.</li>
</ul>
<h4 id="Step-2-Connect-to-TDengine-and-query-data"><a href="#Step-2-Connect-to-TDengine-and-query-data" class="headerlink" title="Step 2: Connect to TDengine and query data"></a>Step 2: Connect to TDengine and query data</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">engine = create_engine(&quot;taos://root:taosdata@localhost:6030/power&quot;)</span><br><span class="line">conn = engine.connect()</span><br><span class="line">print(&quot;Connected to the TDengine ...&quot;)</span><br><span class="line">df = pd.read_sql(</span><br><span class="line">    text(&quot;select _wstart as ds, avg(num) as y from power.meters interval(1w)&quot;), conn</span><br><span class="line">)</span><br><span class="line">conn.close()</span><br></pre></td></tr></table></figure>

<p>TDengine Python connector complies with Python Database API Specification v2.0 (PEP 249). DBAPI is shorthand for the phrase “Python Database API Specification”. This is a widely used specification within Python to define common usage patterns for all database connection packages. The DBAPI is a “low level” API which is typically the lowest level system used in a Python application to talk to a database. SQLAlchemy’s dialect system is constructed around the operation of the DBAPI, providing individual dialect classes which service a specific DBAPI on top of a specific database engine.</p>
<p>We can use SQLAlchemy to connect the TDengine cluster and use Pandas to query data to data frame format.</p>
<p>Here we suppose the user cares about weekly average power consumption instead of daily consumption to reduce the unusual value. We can use AVG() function and INTERVAL(1w) clause command to query the data from the TDengine cluster.</p>
<p>We will manipulate the data in data frame format later.</p>
<h4 id="Step-3-Forecasting"><a href="#Step-3-Forecasting" class="headerlink" title="Step 3: Forecasting"></a>Step 3: Forecasting</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">df.insert(0, column=&quot;unique_id&quot;, value=&quot;unique_id&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;Forecasting ...&quot;)</span><br><span class="line">forecast = mlforecast.MLForecast(</span><br><span class="line">    models=[LinearRegression(), lgb.LGBMRegressor()],</span><br><span class="line">    freq=&quot;W&quot;,</span><br><span class="line">    lags=[52],</span><br><span class="line">    target_transforms=[Differences([52])],</span><br><span class="line">)</span><br><span class="line">forecast.fit(df)</span><br><span class="line"></span><br><span class="line">predicts = forecast.predict(52)</span><br><span class="line"></span><br><span class="line">pd.concat([df, predicts]).set_index(&quot;ds&quot;).plot(figsize=(12, 8)) </span><br></pre></td></tr></table></figure>

<p>By the feat of the mlforecast module, we can do the forecasting with few parameters. Here we use linear regression and LightGBM to show their results in the same graph to visualize what the different algorithms made.</p>
<h4 id="Step-4-Show-up-or-dump-to-file"><a href="#Step-4-Show-up-or-dump-to-file" class="headerlink" title="Step 4: Show up or dump to file"></a>Step 4: Show up or dump to file</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if args.dump:</span><br><span class="line">    plt.savefig(args.dump)</span><br><span class="line">else:</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure>

<p>The Python code provides an argument –dump to allow users to decide to dump the result into a picture for post-processing or to show up the result on the screen immediately.</p>
<p>The above steps are verified on Ubuntu 20.04, Ubuntu 22.04, Windows 10, and macOS.</p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>And that’s it! We now have a very simple program to demonstrate how to use TDengine to predict power meter numbers using power system history data stored in TDengine.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://blog.norepeat.space">Shuduo Sang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://blog.norepeat.space/2023/06/14/Forecast-future-with-TDengine/">http://blog.norepeat.space/2023/06/14/Forecast-future-with-TDengine/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://pbs.twimg.com/profile_images/487469899858464769/kMg2l33E_400x400.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/06/22/A-Collection-of-Open-Source-Forecasting-Framework-for-Time-series-Data/" title="A Collection of Open Source Forecasting Framework for Time-series Data"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">A Collection of Open Source Forecasting Framework for Time-series Data</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/09/Make-coveralls-working-to-generate-test-coverage-report-Finally/" title="Make coveralls working to generate test coverage report, Finally"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Make coveralls working to generate test coverage report, Finally</div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://pbs.twimg.com/profile_images/487469899858464769/kMg2l33E_400x400.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Shuduo Sang</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">8</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">5</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/sangshuduo"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/sangshuduo" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Nice to e-meet you!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Forecast-%E2%80%9Cfuture%E2%80%9D-with-TDengine"><span class="toc-number">1.</span> <span class="toc-text">Forecast “future” with TDengine</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Intro"><span class="toc-number">1.1.</span> <span class="toc-text">Intro</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Demonstration"><span class="toc-number">1.2.</span> <span class="toc-text">Demonstration</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-1-Deploy-TDengine-and-run-the-TDengine-server-on-your-system"><span class="toc-number">1.2.1.</span> <span class="toc-text">Step 1: Deploy TDengine and run the TDengine server on your system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-2-Clone-source-code"><span class="toc-number">1.2.2.</span> <span class="toc-text">Step 2: Clone source code</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-3-Install-the-required-Python-packages"><span class="toc-number">1.2.3.</span> <span class="toc-text">Step 3: Install the required Python packages</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-4-Mock-some-data"><span class="toc-number">1.2.4.</span> <span class="toc-text">Step 4: Mock some data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Step-5-Forecast-next-year%E2%80%99s-data"><span class="toc-number">1.2.5.</span> <span class="toc-text">Step 5: Forecast next year’s data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Result"><span class="toc-number">1.2.6.</span> <span class="toc-text">Result</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#How-does-it-work"><span class="toc-number">1.3.</span> <span class="toc-text">How does it work?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mockdata-py"><span class="toc-number">1.3.1.</span> <span class="toc-text">mockdata.py</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forecast-py"><span class="toc-number">1.3.2.</span> <span class="toc-text">forecast.py</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Step1-Import-necessary-modules-for-prediction"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">Step1: Import necessary modules for prediction</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-2-Connect-to-TDengine-and-query-data"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">Step 2: Connect to TDengine and query data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-3-Forecasting"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">Step 3: Forecasting</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Step-4-Show-up-or-dump-to-file"><span class="toc-number">1.3.2.4.</span> <span class="toc-text">Step 4: Show up or dump to file</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusion"><span class="toc-number">1.4.</span> <span class="toc-text">Conclusion</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/12/16/Verified-steps-to-install-flutter-cocoapods-on-my-apple-silicon-mac/" title="Verified steps to install flutter/cocoapods on my apple silicon mac">Verified steps to install flutter/cocoapods on my apple silicon mac</a><time datetime="2023-12-16T03:47:37.000Z" title="Created 2023-12-16 11:47:37">2023-12-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/17/How-to-run-ROS-inside-Docker/" title="How to run ROS inside Docker">How to run ROS inside Docker</a><time datetime="2023-11-17T13:48:22.000Z" title="Created 2023-11-17 21:48:22">2023-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/22/A-Collection-of-Open-Source-Forecasting-Framework-for-Time-series-Data/" title="A Collection of Open Source Forecasting Framework for Time-series Data">A Collection of Open Source Forecasting Framework for Time-series Data</a><time datetime="2023-06-22T02:38:48.000Z" title="Created 2023-06-22 10:38:48">2023-06-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/14/Forecast-future-with-TDengine/" title="Forecast &quot;future&quot; with TDengine">Forecast &quot;future&quot; with TDengine</a><time datetime="2023-06-14T03:03:04.000Z" title="Created 2023-06-14 11:03:04">2023-06-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/09/Make-coveralls-working-to-generate-test-coverage-report-Finally/" title="Make coveralls working to generate test coverage report, Finally">Make coveralls working to generate test coverage report, Finally</a><time datetime="2022-01-09T13:12:14.000Z" title="Created 2022-01-09 21:12:14">2022-01-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Shuduo Sang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function getGiscusTheme (theme) {
  return theme === 'dark' ? 'dark' : 'light'
}

function loadGiscus () {
  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'sangshuduo/sangshuduo.github.io',
    'data-repo-id': 'R_kgDOGUJzFQ',
    'data-category-id': 'DIC_kwDOGUJzFc4CXu9b',
    'data-mapping': 'pathname',
    'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },null)

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme (theme) {
  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame')
    if (!iframe) return
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app')
  }

  sendMessage({
    setConfig: {
      theme: getGiscusTheme(theme)
    }
  });
}

btf.addModeChange('giscus', changeGiscusTheme)

if ('Giscus' === 'Giscus' || !false) {
  if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>